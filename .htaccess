ExpiresActive On
ExpiresDefault "access"

# Support cache manifest for the Budget app.
AddType text/cache-manifest .manifest

# Rewrite any non-existent files and directories to the index.html file, allowing
# our single page web app to do the routing on the front end.

# Turn the rewrite engine on.
RewriteEngine On

# Set the path to prepend to all rewrites.
RewriteBase /ajko

# If we're processing index.html, leave it alone and stop.
RewriteRule (^index\.html$) - [L] 

# If we're processing a path that isn't a file or a directory, rewrite to index but preserve the path.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) index.html [N,L,QSA]

# Need an explicit rule to redirect the books path to the app, otherwise we get the Apache directory listing.
# But we don't want to match anything on the path, since we don't use the app for the books.
RewriteRule (^books/?$) index.html [N,L]